<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Resume Builder</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Your existing CSS remains unchanged */
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
            --success: #059669;
            --warning: #f59e0b;
            --danger: #dc2626;
            --gray: #64748b;
            --gray-dark: #334155;
            --white: #ffffff;
            --black: #000000;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-light: #f8fafc;
            --border: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --radius: 0.5rem;
            --radius-xl: 1rem;
            --transition: all 0.3s ease;
        }
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background: #f8fafc;
            color: var(--text-primary);
            transition: var(--transition);
        }
        body.dark-mode {
            background: #0f172a;
            color: var(--text-light);
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        body.dark-mode header {
            background: linear-gradient(135deg, #2563eb, #4338ca);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            text-decoration: none;
        }
        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .theme-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            font-size: 1.2rem;
            color: white;
            cursor: pointer;
            transition: var(--transition);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        /* Main Content */
        .main-content {
            display: flex;
            gap: 2rem;
            margin: 2rem 0;
        }
        .sidebar {
            width: 300px;
            background: var(--white);
            border-radius: var(--radius-xl);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: var(--radius-xl);
            border: 1px solid var(--border);
        }
        body.dark-mode .sidebar {
            background: #1e293b;
            border-color: rgba(255, 255, 255, 0.1);
        }
        .sidebar-section {
            margin-bottom: 1.5rem;
        }
        .sidebar-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin: 1.5rem 0 1rem;
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
            padding-bottom: 0.5rem;
        }
        .form-group {
            margin-bottom: 1.5rem;
        }
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-secondary);
        }
        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-family: inherit;
            transition: var(--transition);
        }
        body.dark-mode .form-control {
            background: var(--gray-dark);
            border-color: rgba(255, 255, 255, 0.2);
            color: var(--text-light);
        }
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        textarea.form-control {
            resize: vertical;
            min-height: 100px;
        }
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        .btn-outline {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-primary);
        }
        body.dark-mode .btn-outline {
            border-color: rgba(255, 255, 255, 0.1);
        }
        .btn-outline:hover {
            background: var(--gray);
        }
        body.dark-mode .btn-outline:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        /* Editor Area */
        .editor-area {
            flex: 1;
            background: var(--white);
            border-radius: var(--radius-xl);
            padding: 2rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: var(--radius-xl);
            border: 1px solid var(--border);
        }
        body.dark-mode .editor-area {
            background: #1e293b;
            border-color: rgba(255, 255, 255, 0.1);
        }
        .editor-toolbar {
            display: flex;
            gap: 0.5rem;
            padding: 1rem 0;
            border-bottom: 1px solid var(--border);
            margin-bottom: 1rem;
        }
        body.dark-mode .editor-toolbar {
            border-color: rgba(255, 255, 255, 0.1);
        }
        .toolbar-group {
            display: flex;
            gap: 0.25rem;
            padding: 0 0.5rem;
            border-right: 1px solid var(--border);
        }
        body.dark-mode .toolbar-group {
            border-color: rgba(255, 255, 255, 0.1);
        }
        .toolbar-group:last-child {
            border-right: none;
            padding-right: 0;
            margin-right: 0;
        }
        .toolbar-btn {
            background: transparent;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
        }
        .toolbar-btn:hover {
            background: var(--gray);
            color: var(--primary);
        }
        body.dark-mode .toolbar-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .toolbar-btn:active {
            transform: translateY(1px);
        }
        .editor-content {
            flex: 1;
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 2rem;
            min-height: 600px;
            overflow-y: auto;
            transition: var(--transition);
        }
        body.dark-mode .editor-content {
            background: rgba(30, 41, 59, 0.9);
            border-color: rgba(255, 255, 255, 0.1);
            color: var(--text-light);
        }
        .editor-content[contenteditable="true"]:focus {
            outline: none;
        }
        .editor-content p {
            margin-bottom: 1rem;
        }
        .editor-content h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }
        .editor-content h2 {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 1.5rem 0 1rem;
            color: var(--text-primary);
        }
        .editor-content h3 {
            font-size: 1.4rem;
            font-weight: 600;
            margin: 1.2rem 0 0.8rem;
            color: var(--text-primary);
        }
        .editor-content ul {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }
        .editor-content ol {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }
        .editor-content li {
            margin-bottom: 0.5rem;
        }
        .editor-content blockquote {
            border-left: 4px solid var(--primary);
            margin: 1.5rem 0;
            padding: 1rem 1.5rem;
            background: rgba(67, 97, 238, 0.05);
            font-style: italic;
        }
        body.dark-mode .editor-content blockquote {
            border-color: var(--primary);
            background: rgba(67, 97, 238, 0.1);
        }
        .editor-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        /* Templates */
        .templates-section {
            margin: 2rem 0;
        }
        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }
        .template-item {
            background: var(--white);
            border-radius: var(--radius-xl);
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
            box-shadow: var(--shadow);
        }
        body.dark-mode .template-item {
            background: #1e293b;
            border-color: rgba(255, 255, 255, 0.1);
        }
        .template-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        .template-item.selected {
            box-shadow: 0 0 0 3px var(--accent);
        }
        .template-preview {
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1.1rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        .template-preview.apollo { background: linear-gradient(135deg, #4361ee, #3a0ca3); }
        .template-preview.terra { background: linear-gradient(135deg, #f97316, #ea580c); }
        .template-preview.tempe { background: linear-gradient(135deg, #059669, #047857); }
        .template-preview.nova { background: linear-gradient(135deg, #db2777, #be185d); }
        .template-preview.classic { background: linear-gradient(135deg, #000000, #333333); }
        .template-preview.modern { background: linear-gradient(135deg, #ea580c, #c2410c); }
        .template-preview.professional { background: linear-gradient(135deg, #c2410c, #92400e); }
        .template-preview.corporate { background: linear-gradient(135deg, #fde68a, #f59e0b); }
        .template-preview.academic { background: linear-gradient(135deg, #7c3aed, #6d28d9); }
        .template-preview.legal { background: linear-gradient(135deg, #059669, #047857); }
        .template-preview.artistic { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .template-name {
            margin-top: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
        }
        .template-type {
            display: block;
            font-size: 0.8rem;
            color: var(--gray);
            margin-top: 0.25rem;
        }
        /* Toast Notification */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: var(--radius);
            color: white;
            font-weight: 500;
            box-shadow: var(--shadow-lg);
            z-index: 2000;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transform: translateX(200%);
            transition: transform 0.3s ease;
        }
        .toast.show {
            transform: translateX(0);
        }
        .toast-success {
            background: var(--success);
        }
        .toast-error {
            background: var(--danger);
        }
        .toast-info {
            background: var(--primary);
        }
        /* Resume Templates */
        .template-apollo {
            font-family: 'Inter', sans-serif;
            color: #1e293b;
        }
        .apollo-header {
            text-align: center;
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 4px solid #3a0ca3;
        }
        .apollo-name {
            font-size: 2.8rem;
            font-weight: 800;
            color: #3a0ca3;
            margin-bottom: 0.5rem;
        }
        .apollo-contact {
            display: flex;
            justify-content: center;
            gap: 2.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }
        .apollo-contact span {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: #3a0ca3;
            font-size: 1.2rem;
        }
        .apollo-section {
            margin-bottom: 30px;
        }
        .apollo-section-title {
            font-size: 1.6rem;
            font-weight: 700;
            color: #3a0ca3;
            margin-bottom: 15px;
            position: relative;
            padding-left: 30px;
        }
        .apollo-section-title::before {
            content: "";
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 3px;
            background: #3a0ca3;
        }
        .apollo-experience-item {
            margin-bottom: 20px;
        }
        .apollo-job-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #3a0ca3;
        }
        .apollo-company {
            font-size: 1.2rem;
            font-weight: 600;
            color: #4361ee;
            margin: 5px 0;
        }
        .apollo-date {
            font-size: 1.1rem;
            color: #3a0ca3;
            margin-bottom: 10px;
        }
        .apollo-description {
            color: #475569;
            margin-left: 15px;
        }
        /* Terra Template */
        .template-terra {
            font-family: 'Inter', sans-serif;
            color: #1e293b;
        }
        .terra-header {
            text-align: center;
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 4px solid #ea580c;
        }
        .terra-name {
            font-size: 2.8rem;
            font-weight: 800;
            color: #ea580c;
            margin-bottom: 0.5rem;
        }
        .terra-contact {
            display: flex;
            justify-content: center;
            gap: 2.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }
        .terra-contact span {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: #ea580c;
            font-size: 1.2rem;
        }
        .terra-section {
            margin-bottom: 30px;
        }
        .terra-section-title {
            font-size: 1.6rem;
            font-weight: 700;
            color: #ea580c;
            margin-bottom: 15px;
            position: relative;
            padding-left: 30px;
        }
        .terra-section-title::before {
            content: "";
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 3px;
            background: #ea580c;
        }
        .terra-experience-item {
            margin-bottom: 20px;
        }
        .terra-job-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #ea580c;
        }
        .terra-company {
            font-size: 1.2rem;
            font-weight: 600;
            color: #f97316;
            margin: 5px 0;
        }
        .terra-date {
            font-size: 1.1rem;
            color: #ea580c;
            margin-bottom: 10px;
        }
        .terra-description {
            color: #475569;
            margin-left: 15px;
        }
        /* Other templates would continue similarly */
        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-content {
                flex-direction: column;
            }
            .sidebar {
                width: 100%;
            }
            .template-grid {
                grid-template-columns: 1fr;
            }
        }
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            .main-content {
                margin: 1rem 0;
            }
            .sidebar {
                padding: 1rem;
            }
            .editor-area {
                padding: 1rem;
            }
            .editor-toolbar {
                flex-wrap: wrap;
            }
            .toolbar-group {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo">
                    <i class="fas fa-file-alt"></i>
                    ResumeCraft
                </a>
                <div class="header-actions">
                    <button id="theme-toggle" class="theme-toggle">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>
    <!-- Main Content -->
    <div class="container">
        <div class="main-content">
            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Personal Information -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title"><i class="fas fa-user"></i> Personal Information</h3>
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" id="name" class="form-control" placeholder="John Doe">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" id="email" class="form-control" placeholder="john@example.com">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone</label>
                        <input type="tel" id="phone" class="form-control" placeholder="(555) 123-4567">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Location</label>
                        <input type="text" id="location" class="form-control" placeholder="City, Country">
                    </div>
                </div>
                <!-- Skills -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title"><i class="fas fa-code"></i> Skills</h3>
                    <div class="form-group">
                        <label class="form-label">Skills (comma separated)</label>
                        <input type="text" id="skills" class="form-control" placeholder="JavaScript, React, Node.js">
                    </div>
                </div>
                <!-- Work Experience -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title"><i class="fas fa-briefcase"></i> Work Experience</h3>
                    <div id="experience-container"></div>
                    <button id="add-experience" class="btn btn-outline">
                        <i class="fas fa-plus"></i> Add Experience
                    </button>
                </div>
                <!-- Education -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title"><i class="fas fa-graduation-cap"></i> Education</h3>
                    <div id="education-container"></div>
                    <button id="add-education" class="btn btn-outline">
                        <i class="fas fa-plus"></i> Add Education
                    </button>
                </div>
                <!-- Projects -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title"><i class="fas fa-project-diagram"></i> Projects</h3>
                    <div id="projects-container"></div>
                    <button id="add-project" class="btn btn-outline">
                        <i class="fas fa-plus"></i> Add Project
                    </button>
                </div>
                <!-- References -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title"><i class="fas fa-users"></i> References</h3>
                    <div id="references-container"></div>
                    <button id="add-reference" class="btn btn-outline">
                        <i class="fas fa-plus"></i> Add Reference
                    </button>
                </div>
            </div>
            <!-- Editor Area -->
            <div class="editor-area">
                <!-- Editor Toolbar -->
                <div class="editor-toolbar">
                    <div class="toolbar-group">
                        <button class="toolbar-btn" data-command="bold">
                            <i class="fas fa-bold"></i>
                        </button>
                        <button class="toolbar-btn" data-command="italic">
                            <i class="fas fa-italic"></i>
                        </button>
                        <button class="toolbar-btn" data-command="underline">
                            <i class="fas fa-underline"></i>
                        </button>
                    </div>
                    <div class="toolbar-group">
                        <button class="toolbar-btn" data-command="insertUnorderedList">
                            <i class="fas fa-list-ul"></i>
                        </button>
                        <button class="toolbar-btn" data-command="insertOrderedList">
                            <i class="fas fa-list-ol"></i>
                        </button>
                    </div>
                    <div class="toolbar-group">
                        <button class="toolbar-btn" data-command="justifyLeft">
                            <i class="fas fa-align-left"></i>
                        </button>
                        <button class="toolbar-btn" data-command="justifyCenter">
                            <i class="fas fa-align-center"></i>
                        </button>
                        <button class="toolbar-btn" data-command="justifyRight">
                            <i class="fas fa-align-right"></i>
                        </button>
                        <button class="toolbar-btn" data-command="justifyFull">
                            <i class="fas fa-align-justify"></i>
                        </button>
                    </div>
                </div>
                <!-- Editor Content -->
                <div id="editor-content" class="editor-content" contenteditable="true">
                    <h1>Professional Resume</h1>
                    <p>This is a sample resume. Edit this content using the editor toolbar above.</p>
                </div>
                <!-- Action Buttons -->
                <div class="editor-actions">
                    <button id="download-pdf" class="btn btn-primary">
                        <i class="fas fa-download"></i> Download PDF
                    </button>
                    <button id="save-cloud" class="btn btn-outline">
                        <i class="fas fa-cloud"></i> Save to Cloud
                    </button>
                </div>
            </div>
        </div>
        <!-- Templates Section -->
        <div class="templates-section">
            <h2>Choose a Template</h2>
            <div class="template-grid">
                <div class="template-item" data-template="apollo">
                    <div class="template-preview apollo">Apollo</div>
                    <div class="template-name">Modern <span class="template-type">Professional</span></div>
                </div>
                <div class="template-item" data-template="terra">
                    <div class="template-preview terra">Terra</div>
                    <div class="template-name">Corporate <span class="template-type">Business</span></div>
                </div>
                <div class="template-item" data-template="tempe">
                    <div class="template-preview tempe">Tempe</div>
                    <div class="template-name">Green <span class="template-type">Eco-Friendly</span></div>
                </div>
                <div class="template-item" data-template="nova">
                    <div class="template-preview nova">Nova</div>
                    <div class="template-name">Vibrant <span class="template-type">Creative</span></div>
                </div>
                <div class="template-item" data-template="classic">
                    <div class="template-preview classic">Classic</div>
                    <div class="template-name">Traditional <span class="template-type">Formal</span></div>
                </div>
                <div class="template-item" data-template="modern">
                    <div class="template-preview modern">Modern</div>
                    <div class="template-name">Minimalist <span class="template-type">Clean</span></div>
                </div>
                <div class="template-item" data-template="professional">
                    <div class="template-preview professional">Professional</div>
                    <div class="template-name">Executive <span class="template-type">Corporate</span></div>
                </div>
                <div class="template-item" data-template="corporate">
                    <div class="template-preview corporate">Corporate</div>
                    <div class="template-name">Business <span class="template-type">Professional</span></div>
                </div>
                <div class="template-item" data-template="academic">
                    <div class="template-preview academic">Academic</div>
                    <div class="template-name">Scholarly <span class="template-type">Research</span></div>
                </div>
                <div class="template-item" data-template="legal">
                    <div class="template-preview legal">Legal</div>
                    <div class="template-name">Law <span class="template-type">Compliance</span></div>
                </div>
                <div class="template-item" data-template="artistic">
                    <div class="template-preview artistic">Artistic</div>
                    <div class="template-name">Creative <span class="template-type">Expressive</span></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Toast Notification -->
    <div id="toast" class="toast">Notification</div>
    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
        // Resume Data
        let resumeData = {
            personalInfo: {
                name: '',
                email: '',
                phone: '',
                location: ''
            },
            skills: [],
            experience: [
                {
                    jobTitle: '',
                    company: '',
                    startDate: '',
                    endDate: '',
                    description: ''
                }
            ],
            education: [
                {
                    school: '',
                    degree: '',
                    startDate: '',
                    endDate: ''
                }
            ],
            projects: [
                {
                    name: '',
                    technologies: '',
                    description: '',
                    link: ''
                }
            ],
            references: [
                {
                    name: '',
                    position: '',
                    company: '',
                    email: '',
                    phone: ''
                }
            ],
            template: 'apollo'
        };

        // DOM Elements
        const toast = document.getElementById('toast');
        const themeToggle = document.getElementById('theme-toggle');
        const nameInput = document.getElementById('name');
        const emailInput = document.getElementById('email');
        const phoneInput = document.getElementById('phone');
        const locationInput = document.getElementById('location');
        const skillsInput = document.getElementById('skills');
        const experienceContainer = document.getElementById('experience-container');
        const educationContainer = document.getElementById('education-container');
        const projectsContainer = document.getElementById('projects-container');
        const referencesContainer = document.getElementById('references-container');
        const downloadPdfBtn = document.getElementById('download-pdf');
        const saveCloudBtn = document.getElementById('save-cloud');
        const templateItems = document.querySelectorAll('.template-item');
        const editorContent = document.getElementById('editor-content');

        // Check for saved theme preference
        if (localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark-mode');
            themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        }

        // Theme Toggle
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            if (document.body.classList.contains('dark-mode')) {
                localStorage.setItem('theme', 'dark');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                localStorage.setItem('theme', 'light');
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            }
        });

        // Show toast notification
        function showToast(message, type = 'info') {
            toast.innerHTML = `<i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'}"></i><span>${message}</span>`;
            toast.className = `toast toast-${type} show`;
            setTimeout(() => {
                toast.className = 'toast';
            }, 3000);
        }

        // Update Resume Data
        function updateResumeData() {
            resumeData.personalInfo.name = nameInput.value;
            resumeData.personalInfo.email = emailInput.value;
            resumeData.personalInfo.phone = phoneInput.value;
            resumeData.personalInfo.location = locationInput.value;
            // Update skills
            resumeData.skills = skillsInput.value.split(',').map(skill => skill.trim()).filter(skill => skill);
            // Update experience
            const expElements = experienceContainer.querySelectorAll('.experience-item');
            resumeData.experience = [];
            expElements.forEach((element, index) => {
                const exp = {
                    jobTitle: element.querySelector('.exp-job-title').value,
                    company: element.querySelector('.exp-company').value,
                    startDate: element.querySelector('.exp-start-date').value,
                    endDate: element.querySelector('.exp-end-date').value,
                    description: element.querySelector('.exp-description').value
                };
                resumeData.experience.push(exp);
            });
            // Update education
            const eduElements = educationContainer.querySelectorAll('.education-item');
            resumeData.education = [];
            eduElements.forEach((element, index) => {
                const edu = {
                    school: element.querySelector('.edu-school').value,
                    degree: element.querySelector('.edu-degree').value,
                    startDate: element.querySelector('.edu-start-date').value,
                    endDate: element.querySelector('.edu-end-date').value
                };
                resumeData.education.push(edu);
            });
            // Update projects
            const projectElements = projectsContainer.querySelectorAll('.project-item');
            resumeData.projects = [];
            projectElements.forEach((element, index) => {
                const project = {
                    name: element.querySelector('.project-name').value,
                    technologies: element.querySelector('.project-technologies').value,
                    description: element.querySelector('.project-description').value,
                    link: element.querySelector('.project-link').value
                };
                resumeData.projects.push(project);
            });
            // Update references
            const referenceElements = referencesContainer.querySelectorAll('.reference-item');
            resumeData.references = [];
            referenceElements.forEach((element, index) => {
                const reference = {
                    name: element.querySelector('.ref-name').value,
                    position: element.querySelector('.ref-position').value,
                    company: element.querySelector('.ref-company').value,
                    email: element.querySelector('.ref-email').value,
                    phone: element.querySelector('.ref-phone').value
                };
                resumeData.references.push(reference);
            });
            updatePreview();
        }

        // Render Experience Section
        function renderExperienceSection() {
            experienceContainer.innerHTML = '';
            resumeData.experience.forEach((exp, index) => {
                const expElement = document.createElement('div');
                expElement.className = 'experience-item';
                expElement.innerHTML = `
                    <div class="form-group">
                        <label class="form-label">Job Title</label>
                        <input type="text" class="form-control exp-job-title" data-index="${index}" value="${exp.jobTitle || ''}" placeholder="Software Engineer">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Company</label>
                        <input type="text" class="form-control exp-company" data-index="${index}" value="${exp.company || ''}" placeholder="Company Name">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Start Date</label>
                        <input type="text" class="form-control exp-start-date" data-index="${index}" value="${exp.startDate || ''}" placeholder="MM/YYYY">
                    </div>
                    <div class="form-group">
                        <label class="form-label">End Date</label>
                        <input type="text" class="form-control exp-end-date" data-index="${index}" value="${exp.endDate || ''}" placeholder="MM/YYYY">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <textarea class="form-control exp-description" data-index="${index}" rows="3" placeholder="Describe your responsibilities and achievements...">${exp.description || ''}</textarea>
                    </div>
                    <button class="btn btn-outline remove-item" data-index="${index}">
                        <i class="fas fa-trash"></i> Remove
                    </button>
                `;
                experienceContainer.appendChild(expElement);
            });
        }

        // Render Education Section
        function renderEducationSection() {
            educationContainer.innerHTML = '';
            resumeData.education.forEach((edu, index) => {
                const eduElement = document.createElement('div');
        eduElement.className = 'education-item';
        eduElement.innerHTML = `
            <div class="form-group">
                <label class="form-label">School</label>
                <input type="text" class="form-control edu-school" data-index="${index}" value="${edu.school || ''}" placeholder="University Name">
            </div>
            <div class="form-group">
                <label class="form-label">Degree</label>
                <input type="text" class="form-control edu-degree" data-index="${index}" value="${edu.degree || ''}" placeholder="Bachelor's Degree">
            </div>
            <div class="form-group">
                <label class="form-label">Start Date</label>
                <input type="text" class="form-control edu-start-date" data-index="${index}" value="${edu.startDate || ''}" placeholder="MM/YYYY">
            </div>
            <div class="form-group">
                <label class="form-label">End Date</label>
                <input type="text" class="form-control edu-end-date" data-index="${index}" value="${edu.endDate || ''}" placeholder="MM/YYYY">
            </div>
            <button class="btn btn-outline remove-item" data-index="${index}">
                <i class="fas fa-trash"></i> Remove
            </button>
        `;
        educationContainer.appendChild(eduElement);
    });
}

// Render Projects Section
function renderProjectsSection() {
    projectsContainer.innerHTML = '';
    resumeData.projects.forEach((project, index) => {
        const projectElement = document.createElement('div');
        projectElement.className = 'project-item';
        projectElement.innerHTML = `
            <div class="form-group">
                <label class="form-label">Project Name</label>
                <input type="text" class="form-control project-name" data-index="${index}" value="${project.name || ''}" placeholder="Project Name">
            </div>
            <div class="form-group">
                <label class="form-label">Technologies</label>
                <input type="text" class="form-control project-technologies" data-index="${index}" value="${project.technologies || ''}" placeholder="React, Node.js, MongoDB">
            </div>
            <div class="form-group">
                <label class="form-label">Description</label>
                <textarea class="form-control project-description" data-index="${index}" rows="3" placeholder="Project description...">${project.description || ''}</textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Link</label>
                <input type="url" class="form-control project-link" data-index="${index}" value="${project.link || ''}" placeholder="https://project.com">
            </div>
            <button class="btn btn-outline remove-item" data-index="${index}">
                <i class="fas fa-trash"></i> Remove
            </button>
        `;
        projectsContainer.appendChild(projectElement);
    });
}

// Render References Section
function renderReferencesSection() {
    referencesContainer.innerHTML = '';
    resumeData.references.forEach((reference, index) => {
        const refElement = document.createElement('div');
        refElement.className = 'reference-item';
        refElement.innerHTML = `
            <div class="form-group">
                <label class="form-label">Name</label>
                <input type="text" class="form-control ref-name" data-index="${index}" value="${reference.name || ''}" placeholder="John Smith">
            </div>
            <div class="form-group">
                <label class="form-label">Position</label>
                <input type="text" class="form-control ref-position" data-index="${index}" value="${reference.position || ''}" placeholder="Position Title">
            </div>
            <div class="form-group">
                <label class="form-label">Company</label>
                <input type="text" class="form-control ref-company" data-index="${index}" value="${reference.company || ''}" placeholder="Company Name">
            </div>
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-control ref-email" data-index="${index}" value="${reference.email || ''}" placeholder="john@company.com">
            </div>
            <div class="form-group">
                <label class="form-label">Phone</label>
                <input type="tel" class="form-control ref-phone" data-index="${index}" value="${reference.phone || ''}" placeholder="(555) 123-4567">
            </div>
            <button class="btn btn-outline remove-item" data-index="${index}">
                <i class="fas fa-trash"></i> Remove
            </button>
        `;
        referencesContainer.appendChild(refElement);
    });
}

// Render Skills
function renderSkills() {
    skillsInput.value = resumeData.skills.join(', ');
}

// Update Preview
function updatePreview() {
    const template = resumeData.template;
    let previewHTML = `
        <div class="template-${template}">
            <div class="${template}-header">
                <h1 class="${template}-name">${resumeData.personalInfo.name || 'Your Name'}</h1>
                <div class="${template}-contact">
                    ${resumeData.personalInfo.email ? `<span><i class="fas fa-envelope"></i> ${resumeData.personalInfo.email}</span>` : ''}
                    ${resumeData.personalInfo.phone ? `<span><i class="fas fa-phone"></i> ${resumeData.personalInfo.phone}</span>` : ''}
                    ${resumeData.personalInfo.location ? `<span><i class="fas fa-map-marker-alt"></i> ${resumeData.personalInfo.location}</span>` : ''}
                </div>
            </div>
            <div class="${template}-section">
                <h2 class="${template}-section-title">Skills</h2>
                <p>${resumeData.skills.length > 0 ? resumeData.skills.join(', ') : 'No skills added yet'}</p>
            </div>
            <div class="${template}-section">
                <h2 class="${template}-section-title">Work Experience</h2>
                ${resumeData.experience.map(exp => `
                    <div class="${template}-experience-item">
                        <h3 class="${template}-job-title">${exp.jobTitle || 'Job Title'}</h3>
                        <p class="${template}-company">${exp.company || 'Company Name'}</p>
                        <p class="${template}-date">${exp.startDate || 'MM/YYYY'} - ${exp.endDate || 'MM/YYYY'}</p>
                        <p class="${template}-description">${exp.description || 'Job description...'}</p>
                    </div>
                `).join('')}
            </div>
            <div class="${template}-section">
                <h2 class="${template}-section-title">Education</h2>
                ${resumeData.education.map(edu => `
                    <div class="${template}-experience-item">
                        <h3 class="${template}-job-title">${edu.degree || 'Degree'}</h3>
                        <p class="${template}-company">${edu.school || 'School Name'}</p>
                        <p class="${template}-date">${edu.startDate || 'MM/YYYY'} - ${edu.endDate || 'MM/YYYY'}</p>
                    </div>
                `).join('')}
            </div>
        </div>
    `;
    editorContent.innerHTML = previewHTML;
}

// Download PDF - FIXED VERSION
function downloadPDF() {
    // Create a new div to hold the content for PDF generation
    const pdfContent = document.createElement('div');
    pdfContent.id = 'pdf-content';
    
    // Copy the editor content but with proper styling for PDF
    const editorClone = editorContent.cloneNode(true);
    pdfContent.appendChild(editorClone);
    
    // Add CSS for PDF formatting
    const style = document.createElement('style');
    style.textContent = `
        #pdf-content {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: white;
            color: black;
        }
        
        .template-apollo, .template-terra, .template-tempe, .template-nova, 
        .template-classic, .template-modern, .template-professional, 
        .template-corporate, .template-academic, .template-legal, .template-artistic {
            font-family: Arial, sans-serif !important;
            color: #000 !important;
        }
        
        .template-apollo .apollo-header, .template-terra .terra-header, 
        .template-tempe .tempe-header, .template-nova .nova-header,
        .template-classic .classic-header, .template-modern .modern-header,
        .template-professional .professional-header, .template-corporate .corporate-header,
        .template-academic .academic-header, .template-legal .legal-header,
        .template-artistic .artistic-header {
            text-align: center !important;
            margin-bottom: 35px !important;
            padding-bottom: 25px !important;
            border-bottom: 4px solid !important;
        }
        
        .template-apollo .apollo-name, .template-terra .terra-name,
        .template-tempe .tempe-name, .template-nova .nova-name,
        .template-classic .classic-name, .template-modern .modern-name,
        .template-professional .professional-name, .template-corporate .corporate-name,
        .template-academic .academic-name, .template-legal .legal-name,
        .template-artistic .artistic-name {
            font-size: 2.8rem !important;
            font-weight: 800 !important;
            margin-bottom: 0.5rem !important;
        }
        
        .template-apollo .apollo-contact, .template-terra .terra-contact,
        .template-tempe .tempe-contact, .template-nova .nova-contact,
        .template-classic .classic-contact, .template-modern .modern-contact,
        .template-professional .professional-contact, .template-corporate .corporate-contact,
        .template-academic .academic-contact, .template-legal .legal-contact,
        .template-artistic .artistic-contact {
            display: flex !important;
            justify-content: center !important;
            gap: 2.5rem !important;
            margin-top: 1rem !important;
            flex-wrap: wrap !important;
        }
        
        .template-apollo .apollo-section, .template-terra .terra-section,
        .template-tempe .tempe-section, .template-nova .nova-section,
        .template-classic .classic-section, .template-modern .modern-section,
        .template-professional .professional-section, .template-corporate .corporate-section,
        .template-academic .academic-section, .template-legal .legal-section,
        .template-artistic .artistic-section {
            margin-bottom: 30px !important;
        }
        
        .template-apollo .apollo-section-title, .template-terra .terra-section-title,
        .template-tempe .tempe-section-title, .template-nova .nova-section-title,
        .template-classic .classic-section-title, .template-modern .modern-section-title,
        .template-professional .professional-section-title, .template-corporate .corporate-section-title,
        .template-academic .academic-section-title, .template-legal .legal-section-title,
        .template-artistic .artistic-section-title {
            font-size: 1.6rem !important;
            font-weight: 700 !important;
            margin-bottom: 15px !important;
            position: relative !important;
            padding-left: 30px !important;
        }
        
        .template-apollo .apollo-experience-item, .template-terra .terra-experience-item,
        .template-tempe .tempe-experience-item, .template-nova .nova-experience-item,
        .template-classic .classic-experience-item, .template-modern .modern-experience-item,
        .template-professional .professional-experience-item, .template-corporate .corporate-experience-item,
        .template-academic .academic-experience-item, .template-legal .legal-experience-item,
        .template-artistic .artistic-experience-item {
            margin-bottom: 20px !important;
            padding-left: 20px !important;
            border-left: 3px solid !important;
        }
        
        .template-apollo .apollo-job-title, .template-terra .terra-job-title,
        .template-tempe .tempe-job-title, .template-nova .nova-job-title,
        .template-classic .classic-job-title, .template-modern .modern-job-title,
        .template-professional .professional-job-title, .template-corporate .corporate-job-title,
        .template-academic .academic-job-title, .template-legal .legal-job-title,
        .template-artistic .artistic-job-title {
            font-size: 1.4rem !important;
            font-weight: 700 !important;
        }
        
        .template-apollo .apollo-company, .template-terra .terra-company,
        .template-tempe .tempe-company, .template-nova .nova-company,
        .template-classic .classic-company, .template-modern .modern-company,
        .template-professional .professional-company, .template-corporate .corporate-company,
        .template-academic .academic-company, .template-legal .legal-company,
        .template-artistic .artistic-company {
            font-size: 1.2rem !important;
            font-weight: 600 !important;
        }
        
        .template-apollo .apollo-date, .template-terra .terra-date,
        .template-tempe .tempe-date, .template-nova .nova-date,
        .template-classic .classic-date, .template-modern .modern-date,
        .template-professional .professional-date, .template-corporate .corporate-date,
        .template-academic .academic-date, .template-legal .legal-date,
        .template-artistic .artistic-date {
            font-size: 1.1rem !important;
            margin-bottom: 10px !important;
        }
        
        .template-apollo .apollo-description, .template-terra .terra-description,
        .template-tempe .tempe-description, .template-nova .nova-description,
        .template-classic .classic-description, .template-modern .modern-description,
        .template-professional .professional-description, .template-corporate .corporate-description,
        .template-academic .academic-description, .template-legal .legal-description,
        .template-artistic .artistic-description {
            color: #475569 !important;
            margin-left: 15px !important;
        }
        
        .template-apollo .apollo-section-title::before,
        .template-terra .terra-section-title::before,
        .template-tempe .tempe-section-title::before,
        .template-nova .nova-section-title::before,
        .template-classic .classic-section-title::before,
        .template-modern .modern-section-title::before,
        .template-professional .professional-section-title::before,
        .template-corporate .corporate-section-title::before,
        .template-academic .academic-section-title::before,
        .template-legal .legal-section-title::before,
        .template-artistic .artistic-section-title::before {
            content: "" !important;
            position: absolute !important;
            left: 0 !important;
            top: 50% !important;
            transform: translateY(-50%) !important;
            width: 20px !important;
            height: 3px !important;
        }
        
        .template-apollo .apollo-section-title::before { background: #3a0ca3 !important; }
        .template-terra .terra-section-title::before { background: #ea580c !important; }
        .template-tempe .tempe-section-title::before { background: #059669 !important; }
        .template-nova .nova-section-title::before { background: #db2777 !important; }
        .template-classic .classic-section-title::before { background: #000000 !important; }
        .template-modern .modern-section-title::before { background: #ea580c !important; }
        .template-professional .professional-section-title::before { background: #c2410c !important; }
        .template-corporate .corporate-section-title::before { background: #fde68a !important; }
        .template-academic .academic-section-title::before { background: #7c3aed !important; }
        .template-legal .legal-section-title::before { background: #059669 !important; }
        .template-artistic .artistic-section-title::before { background: #f59e0b !important; }
    `;
    
    pdfContent.appendChild(style);
    
    // Add to document temporarily
    document.body.appendChild(pdfContent);
    
    // Generate PDF
    const options = {
        margin: 10,
        filename: 'resume.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { 
            scale: 2,
            useCORS: true,
            allowTaint: true
        },
        jsPDF: { 
            unit: 'mm', 
            format: 'a4', 
            orientation: 'portrait' 
        }
    };
    
    html2pdf().from(pdfContent).set(options).save();
    
    // Remove temporary element
    document.body.removeChild(pdfContent);
}

// Event Listeners
document.addEventListener('input', (e) => {
    if (e.target.classList.contains('exp-job-title') ||
        e.target.classList.contains('exp-company') ||
        e.target.classList.contains('exp-start-date') ||
        e.target.classList.contains('exp-end-date') ||
        e.target.classList.contains('exp-description')) {
        const index = parseInt(e.target.getAttribute('data-index'));
        resumeData.experience[index][e.target.classList[2].split('-')[2]] = e.target.value;
        updatePreview();
    } else if (e.target.classList.contains('edu-school') ||
               e.target.classList.contains('edu-degree') ||
               e.target.classList.contains('edu-start-date') ||
               e.target.classList.contains('edu-end-date')) {
        const index = parseInt(e.target.getAttribute('data-index'));
        resumeData.education[index][e.target.classList[2].split('-')[2]] = e.target.value;
        updatePreview();
    } else if (e.target.classList.contains('project-name') ||
               e.target.classList.contains('project-technologies') ||
               e.target.classList.contains('project-description') ||
               e.target.classList.contains('project-link')) {
        const index = parseInt(e.target.getAttribute('data-index'));
        resumeData.projects[index][e.target.classList[2].split('-')[2]] = e.target.value;
        updatePreview();
    } else if (e.target.classList.contains('ref-name') ||
               e.target.classList.contains('ref-position') ||
               e.target.classList.contains('ref-company') ||
               e.target.classList.contains('ref-email') ||
               e.target.classList.contains('ref-phone')) {
        const index = parseInt(e.target.getAttribute('data-index'));
        resumeData.references[index][e.target.classList[2].split('-')[2]] = e.target.value;
        updatePreview();
    }
});

// Remove Items
document.addEventListener('click', (e) => {
    if (e.target.classList.contains('remove-item')) {
        const index = parseInt(e.target.getAttribute('data-index'));
        const parent = e.target.closest('.form-group, .project-item, .reference-item');
        if (parent && parent.parentNode) {
            parent.parentNode.removeChild(parent);
        }
        // Remove from data
        if (e.target.closest('#experience-container')) {
            resumeData.experience.splice(index, 1);
        } else if (e.target.closest('#education-container')) {
            resumeData.education.splice(index, 1);
        } else if (e.target.closest('#projects-container')) {
            resumeData.projects.splice(index, 1);
        } else if (e.target.closest('#references-container')) {
            resumeData.references.splice(index, 1);
        }
        updatePreview();
    }
});

// Add Experience
document.getElementById('add-experience').addEventListener('click', () => {
    resumeData.experience.push({
        jobTitle: '',
        company: '',
        startDate: '',
        endDate: '',
        description: ''
    });
    renderExperienceSection();
    updatePreview();
});

// Add Education
document.getElementById('add-education').addEventListener('click', () => {
    resumeData.education.push({
        school: '',
        degree: '',
        startDate: '',
        endDate: ''
    });
    renderEducationSection();
    updatePreview();
});

// Add Project
document.getElementById('add-project').addEventListener('click', () => {
    resumeData.projects.push({
        name: '',
        technologies: '',
        description: '',
        link: ''
    });
    renderProjectsSection();
    updatePreview();
});

// Add Reference
document.getElementById('add-reference').addEventListener('click', () => {
    resumeData.references.push({
        name: '',
        position: '',
        company: '',
        email: '',
        phone: ''
    });
    renderReferencesSection();
    updatePreview();
});

// Skills Input
skillsInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter' || e.key === ',') {
        e.preventDefault();
        const value = e.target.value.trim();
        if (value && !resumeData.skills.includes(value)) {
            resumeData.skills.push(value);
            e.target.value = '';
            renderSkills();
            updatePreview();
        }
    }
});

// Editor Toolbar
document.querySelectorAll('.toolbar-btn').forEach(button => {
    button.addEventListener('click', (e) => {
        e.preventDefault();
        const command = button.getAttribute('data-command');
        if (command) {
            document.execCommand(command, false, null);
            editorContent.focus();
        }
    });
});

// Template Selection
templateItems.forEach(item => {
    item.addEventListener('click', () => {
        const template = item.getAttribute('data-template');
        resumeData.template = template;
        templateItems.forEach(t => t.classList.remove('selected'));
        item.classList.add('selected');
        updatePreview();
    });
});

// Initialize
updatePreview();
renderExperienceSection();
renderEducationSection();
renderProjectsSection();
renderReferencesSection();
renderSkills();

// Set initial template selection
document.querySelector('.template-item[data-template="apollo"]').classList.add('selected');

// Add event listener for download PDF
downloadPdfBtn.addEventListener('click', downloadPDF);
    </script>
</body>
</html>
